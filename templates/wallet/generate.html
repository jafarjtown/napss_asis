{% extends 'base.html' %}

{% load humanize %}

{% block style %}
{% endblock style %}

{% block content %}
<style>
  .nk-wgw {
  position: relative;
}
.nk-wgw-inner {
  padding: 1.25rem;
  display: block;
}
.sm.nk-wgw .nk-wgw-inner {
  padding: 1.25rem;
}
.nk-wgw-name {
  display: flex;
  align-items: center;
}
.nk-wgw-icon {
  position: relative;
  height: 32px;
  width: 32px;
  font-size: 20px;
  border-radius: 50%;
  background: #8094ae;
  color: #fff;
  margin-right: 0.75rem;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}
.is-dark .nk-wgw-icon {
  background: #6baafe;
}
.nk-wgw-icon.is-default:after {
  position: absolute;
  bottom: -8px;
  right: -8px;
  font-family: "Nioicon";
  content: "\ebcc";
  height: 20px;
  width: 20px;
  font-size: 13px;
  border-radius: 50%;
  background: #fff;
  color: #ffa353;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}
.is-dark .nk-wgw-icon.is-default:after {
  background: #0b3175;
}
.nk-wgw-title {
  font-family: Roboto, sans-serif;
  font-weight: 500;
  font-size: 1rem;
  margin-bottom: 0;
  color: #526484;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.is-dark .nk-wgw-title {
  color: #fff;
}
.nk-wgw-more {
  position: absolute;
  top: 1.25rem;
  right: 1.25rem;
}
.is-dark .nk-wgw-more .btn-trigger {
  color: #a9cdff;
}
.is-dark .nk-wgw-more .btn-trigger:before {
  background-color: #071d46;
}
.nk-wgw-balance {
  line-height: 1.3;
  padding-top: 1.25rem;
}
.nk-wgw-balance .amount {
  font-size: 1.5rem;
  font-weight: 500;
  color: #364a63;
}
.is-dark .nk-wgw-balance .amount {
  color: #fff;
}
.nk-wgw-balance .amount span {
  font-weight: 400;
  opacity: 0.6;
}
.nk-wgw-balance .amount-sm {
  font-size: 13px;
  color: #526484;
  font-weight: 700;
  padding-top: 0.125rem;
}
.is-dark .nk-wgw-balance .amount-sm {
  color: #6baafe;
}
.nk-wgw-balance .amount-sm span {
  font-weight: 400;
}
.nk-wgw-balance .currency {
  padding-left: 0.25rem;
}
.nk-wgw-actions {
  padding: 0.75rem 1.25rem;
  border-top: 1px solid #e5e9f2;
}
.is-dark .nk-wgw-actions {
  border-color: rgba(9, 113, 254, 0.4);
}
.nk-wgw-actions ul {
  display: flex;
  align-items: center;
  flex-wrap: wrap;
}
.nk-wgw-actions ul li:not(:last-child) {
  padding-right: 1.5rem;
}
.nk-wgw-actions a {
  display: inline-flex;
  align-items: center;
  font-size: 12px;
  padding: 0.5rem 0;
  color: #526484;
}
</style>
                <!-- content @s -->
                <div class="nk-content nk-content-fluid">
                    <div class="container-xl wide-lg">
                        <div class="nk-content-body">
                            <div class="nk-block-head">
                                <div class="nk-block-head-sub"><span>Account Wallet</span> </div><!-- .nk-block-head-sub -->
                                <div class="nk-block-between-md g-4">
                                    <div class="nk-block-head-content">
                                        <h2 class="nk-block-title fw-normal">Airtime / Data Top-up</h2>
                                        
                                    </div>
                                </div><!-- .nk-block-between -->
                            </div><!-- .nk-block-head -->
                            <div class="nk-block">
                                <div class="row g-gs">
                                    <div class="col-sm-6 col-lg-4 col-xl-6 col-xxl-4">
                                        <div class="card card-bordered">
                                          {% if link %}
                                          <div class="form-group my-3 mx-2">
                                            <div class="form-control-wrap">
                                                <div class="input-group">
                                                    <input link value="{{ link.get_absolute_url }}" type="text" class="form-control" placeholder="Link here" readonly>
                                                    <div class="input-group-append">
                                                        <button copybtn class="btn input-group-text" ><em class="icon ni ni-copy"></em> copy</button>
                                                    </div>
                                                </div>
                                            </div>
                                          </div>
                                          {% endif %}
                                          <form method="post" class="px-2 py-3 form-validate">
                                            {% csrf_token %}
                                            <div class="form-group">
                                              <label class="form-label" for="number">Name</label>
                                              <div class="form-control-wrap">
                                                <input class="form-control" type="text" name="name" minlength='11' required placeholder="eg. Happy Eid." data-msg="Pleaee enter a name to be displayed.">
                                              </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="form-label" for="network">Network</label>
                                                <div class="form-control-wrap">
                                                    <select name="network" class="form-select js-select2" required>
                                                      <option value="mtn">MTN</option>
                                                      <option value="airtel">Airtel</option>
                                                      <option value="glo">Glo</option>
                                                      <option value="etisalat">Etisalat</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="form-label" for="data">Type</label>
                                                <div class="form-control-wrap">
                                                    <select name="type" class="form-select js-select2" required type>
                                                      <option value="airtime">Airtime</option>
                                                      <option value="data">Data</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="form-group" airtime-amount>
                                              <label class="form-label" for="number">Amount</label>
                                              <div class="form-control-wrap">
                                                <input class="form-control" type="number" name="airtime-amount" required placeholder="eg. 1000" data-msg="Pleaee enter amount to recharge per slot.">
                                              </div>
                                            </div>
                                            <div class="form-group d-none" data-amount>
                                                <label class="form-label" for="network">Amount</label>
                                                <div class="form-control-wrap">
                                                    <select name="data-amount" class="form-select js-select2" required>
                                                      <option value="1024">1GB</option>
                                                      <option value="1500">1.5GB</option>
                                                      <option value="2000">2GB</option>
                                                      <option value="5000">5GB</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="form-group">

                                              <label class="form-label" for="number">Slot</label>

                                              <div class="form-control-wrap">
                                                <input class="form-control" type="number" name="slot" min="3" required placeholder="eg. 3 to above" data-msg="Pleaee enter number of slot to generate.">
                                              </div>
                                            </div>
                                            <div class="form-group d-flex flex-row justify-content-end">
                                              <button class="btn btn-primary">Proceed</button>
                                            </div>
                                          </form>
                                        </div><!-- .card -->
                                    </div><!-- .col -->
                                </div><!-- .row -->
                            </div>
                        </div>
                    </div>
                </div>
                <!-- content @e -->
{% endblock content %}
{% block script %}
<script>
  const typeOfLink = $('.js-select2[type]')
  const airtimeType = document.querySelector('[airtime-amount]')
  const dataType = document.querySelector('[data-amount]')
  const link = document.querySelector('[link]')
  const copyBtnLink = document.querySelector('[copybtn]')
  typeOfLink.on('change', toggleTypeAmount)
  
  if(link && copyBtnLink){
    alert('Link Generated Successfully : '+link.value)
    copyBtnLink.addEventListener('click', ()=>{
      alert(link.value)
    })
  }
  
  
  
  function toggleTypeAmount(){
    if(typeOfLink.val() == 'data'){
      airtimeType.classList.add('d-none')
      dataType.classList.remove('d-none')
    }else{
      airtimeType.classList.remove('d-none')
      dataType.classList.add('d-none')
      
    }
  }
</script>
{% endblock script %}
